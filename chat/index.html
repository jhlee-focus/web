<!DOCTYPE html> <html lang="ko"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>SweetK 멀티LLM 서비스</title> <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script> <style> :root { --primary-color: #007bff; --bg-color: #f0f2f5; --container-bg: #ffffff; --sidebar-bg: #f8f9fa; --text-main: #1c1e21; --text-sub: #65676b; --border-color: #ebedf0; --input-bg: #f0f2f5; --sidebar-width: 260px; --model-tag-bg: #e7f3ff; --model-tag-text: #007bff; } [data-theme='dark'] { --bg-color: #18191a; --container-bg: #242526; --sidebar-bg: #1c1e21; --text-main: #e4e6eb; --text-sub: #b0b3b8; --border-color: #3e4042; --input-bg: #3a3b3c; --model-tag-bg: #1c2d3d; --model-tag-text: #3a8ee6; } body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg-color); margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; } .main-wrapper { width: 100%; max-width: 1400px; height: 95vh; display: flex; background: var(--container-bg); box-shadow: 0 12px 28px rgba(0,0,0,0.12); border-radius: 16px; overflow: hidden; margin: 10px; position: relative; } /* 사이드바 애니메이션 최적화 */ .sidebar { width: var(--sidebar-width); background: var(--sidebar-bg); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); flex-shrink: 0; z-index: 100; margin-left: 0; } .sidebar.collapsed { margin-left: calc(var(--sidebar-width) * -1); opacity: 0; pointer-events: none; } .sidebar-header { padding: 20px; } .new-chat-btn { width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; } .history-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 5px; } .history-item { position: relative; padding: 10px 35px 10px 10px; border-radius: 8px; cursor: pointer; font-size: 0.9rem; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; } .history-item:hover { background: var(--input-bg); } .history-item.active { background: var(--input-bg); font-weight: 600; border: 1px solid var(--primary-color); } .delete-chat-btn { position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--text-sub); cursor: pointer; opacity: 0; } .history-item:hover .delete-chat-btn { opacity: 1; } /* 채팅 영역 */ .chat-container { flex: 1; display: flex; flex-direction: column; min-width: 0; } .chat-header { padding: 10px 15px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; justify-content: space-between; } .header-left { display: flex; align-items: center; gap: 10px; } #menu-toggle { background: none; border: none; cursor: pointer; font-size: 1.5rem; color: var(--text-main); display: flex; align-items: center; } #chat-messages { flex: 1; padding: 20px; overflow-y: auto; background-color: var(--bg-color); display: flex; flex-direction: column; gap: 20px; } .message-group { display: flex; flex-direction: column; gap: 4px; max-width: 85%; } .message-group.bot { align-self: flex-start; } .message-group.user { align-self: flex-end; align-items: flex-end; } .model-tag { font-size: 0.75rem; font-weight: 600; color: var(--model-tag-text); background: var(--model-tag-bg); padding: 2px 8px; border-radius: 6px; width: fit-content; margin-bottom: 2px; } .message { padding: 10px 15px; border-radius: 18px; font-size: 0.95rem; line-height: 1.5; color: var(--text-main); } .bot .message { background: var(--container-bg); border: 1px solid var(--border-color); border-bottom-left-radius: 4px; } .user .message { background: var(--primary-color); color: white; border-bottom-right-radius: 4px; } .chat-input-area { padding: 15px 20px; border-top: 1px solid var(--border-color); display: flex; gap: 10px; align-items: center; } #user-input { flex: 1; padding: 12px 15px; border-radius: 20px; border: 1px solid var(--border-color); outline: none; background: var(--input-bg); color: var(--text-main); } /* 모바일 모드 오버레이 */ @media (max-width: 768px) { .sidebar { position: absolute; height: 100%; left: 0; top: 0; box-shadow: 5px 0 15px rgba(0,0,0,0.1); } .sidebar.collapsed { transform: translateX(-100%); margin-left: 0; } } </style> </head> <body> <div class="main-wrapper"> <div class="sidebar" id="sidebar"> <div class="sidebar-header"><button class="new-chat-btn" id="new-chat-btn">＋ 새 채팅</button></div> <div class="history-list" id="history-list"></div> </div> <div class="chat-container"> <div class="chat-header"> <div class="header-left"> <button id="menu-toggle" title="사이드바 토글">☰</button> <img src="sweetklogo.png" alt="SweetK Logo" style="height:24px;"> <h2 style="margin:0; font-size:0.95rem; color:var(--text-main)">SweetK 멀티LLM</h2> </div> <button id="theme-toggle-btn" style="background:var(--input-bg); border:none; padding:5px 10px; border-radius:15px; color:var(--primary-color); font-size:0.75rem; cursor:pointer;">다크모드</button> </div> <div id="chat-messages"></div> <div id="loading" style="padding:10px 20px; font-size:0.8rem; color:var(--text-sub); display:none;">생각 중...</div> <div class="chat-input-area"> <select id="model-select" style="padding:8px; border-radius:8px; border:1px solid var(--border-color); background:var(--input-bg); color:var(--text-main);"> <option value="/gpt">ChatGPT</option> <option value="/claude">Claude</option> <option value="/gemini">Gemini</option> <option value="/perplexity">Perplexity</option> <option value="/deepseek">Deepseek</option> </select> <input type="text" id="user-input" placeholder="메시지 입력..." autocomplete="off"> <button id="send-btn" style="background:var(--primary-color); color:white; border:none; width:35px; height:35px; border-radius:50%; cursor:pointer;">➤</button> </div> </div> </div> <script> window.onload = function() { const sidebar = document.getElementById('sidebar'); const menuToggle = document.getElementById('menu-toggle'); const chatMessages = document.getElementById('chat-messages'); const userInput = document.getElementById('user-input'); const sendBtn = document.getElementById('send-btn'); const historyList = document.getElementById('history-list'); const newChatBtn = document.getElementById('new-chat-btn'); // 초기 반응형 상태 설정 if (window.innerWidth <= 768) { sidebar.classList.add('collapsed'); } // 사이드바 토글 핵심 로직 menuToggle.addEventListener('click', () => { sidebar.classList.toggle('collapsed'); }); // [나머지 렌더링 및 통신 로직 기존 동일 유지] let conversations = JSON.parse(localStorage.getItem('sweetk_chats') || '[]'); let currentChatId = null; function renderHistory() { historyList.innerHTML = ''; conversations.forEach(chat => { const item = document.createElement('div'); item.className = `history-item ${chat.id === currentChatId ? 'active' : ''}`; item.textContent = chat.title; item.onclick = (e) => { if(e.target.className !== 'delete-chat-btn') { loadChat(chat.id); if(window.innerWidth <= 768) sidebar.classList.add('collapsed'); } }; const delBtn = document.createElement('button'); delBtn.className = 'delete-chat-btn'; delBtn.innerHTML = '×'; delBtn.onclick = (e) => { e.stopPropagation(); if(confirm("삭제하시겠습니까?")) deleteChat(chat.id); }; item.appendChild(delBtn); historyList.appendChild(item); }); } function deleteChat(id) { conversations = conversations.filter(c => c.id !== id); localStorage.setItem('sweetk_chats', JSON.stringify(conversations)); if (currentChatId === id) startNewChat(); else renderHistory(); } function startNewChat() { currentChatId = Date.now(); chatMessages.innerHTML = '<div class="message-group bot"><div class="message">무엇을 도와드릴까요?</div></div>'; renderHistory(); } function loadChat(id) { currentChatId = id; const chat = conversations.find(c => c.id === id); chatMessages.innerHTML = ''; if(chat) chat.messages.forEach(m => addMessage(m.content, m.sender, false, m.model)); renderHistory(); } function addMessage(content, sender, shouldSave = true, modelName = null) { const group = document.createElement('div'); group.className = `message-group ${sender}`; if (sender === 'bot' && modelName) { const tag = document.createElement('div'); tag.className = 'model-tag'; tag.textContent = modelName; group.appendChild(tag); } const div = document.createElement('div'); div.className = 'message'; div.innerHTML = sender === 'bot' ? marked.parse(content) : content; group.appendChild(div); chatMessages.appendChild(group); chatMessages.scrollTop = chatMessages.scrollHeight; if (shouldSave) { let chat = conversations.find(c => c.id === currentChatId); if (!chat) { chat = { id: currentChatId, title: content.substring(0, 15), messages: [] }; conversations.unshift(chat); } chat.messages.push({ sender, content, model: modelName }); localStorage.setItem('sweetk_chats', JSON.stringify(conversations)); renderHistory(); } } async function sendMessage() { const text = userInput.value.trim(); if (!text || sendBtn.disabled) return; const modelName = document.getElementById('model-select').options[document.getElementById('model-select').selectedIndex].text; addMessage(text, 'user', true); userInput.value = ''; document.getElementById('loading').style.display = 'block'; try { const res = await fetch('https://jhleefocus.app.n8n.cloud/webhook/d232c2f6-ea39-41e5-b310-c389eab49e06/chat', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ chatInput: `${document.getElementById('model-select').value} ${text}` }), }); const data = await res.json(); addMessage(data.output || "응답이 없습니다.", 'bot', true, modelName); } catch (err) { addMessage('에러 발생', 'bot', true, 'System'); } finally { document.getElementById('loading').style.display = 'none'; } } newChatBtn.onclick = startNewChat; sendBtn.onclick = sendMessage; userInput.onkeypress = (e) => { if (e.key === 'Enter') sendMessage(); }; marked.setOptions({ breaks: true }); if (conversations.length > 0) loadChat(conversations[0].id); else startNewChat(); }; </script> </body> </html>
